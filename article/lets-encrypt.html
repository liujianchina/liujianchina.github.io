<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>let&#39;s-encrypt配置网站免费SSL证书及自动更新 | 树先生的博客</title>
  <meta name="description" content="前言 厂商选择 下载安装cert-bot  安装cert-bot 获取证书  直接安装到nginx 只生成证书 测试自动更新证书 纯手动的certonly     参考链接     前言# 相信看到这里的对SSL&#x2F;TSL都有一定了解，链式信任、防劫持、防隐私泄露、安全可信，这些关键字大家脑海里都很熟悉。具体SSL细节就不啰嗦了，感兴趣可以去看看阮一峰的博客或者网上资料，本文主要是实操。">
<meta property="og:type" content="article">
<meta property="og:title" content="let&#39;s-encrypt配置网站免费SSL证书及自动更新">
<meta property="og:url" content="https://blog.sofunnyai.com/article/lets-encrypt.html">
<meta property="og:site_name" content="树先生的金融风控工程师博客">
<meta property="og:description" content="前言 厂商选择 下载安装cert-bot  安装cert-bot 获取证书  直接安装到nginx 只生成证书 测试自动更新证书 纯手动的certonly     参考链接     前言# 相信看到这里的对SSL&#x2F;TSL都有一定了解，链式信任、防劫持、防隐私泄露、安全可信，这些关键字大家脑海里都很熟悉。具体SSL细节就不啰嗦了，感兴趣可以去看看阮一峰的博客或者网上资料，本文主要是实操。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/radio/pics/raw/master/img/image-20200719214622846.png">
<meta property="article:published_time" content="2019-07-13T18:44:23.000Z">
<meta property="article:modified_time" content="2020-07-19T15:25:55.925Z">
<meta property="article:author" content="树先生">
<meta property="article:tag" content="网络">
<meta property="article:tag" content="hexo">
<meta property="article:tag" content="运维">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/radio/pics/raw/master/img/image-20200719214622846.png">
  <!-- Canonical links -->
  <link rel="canonical" href="https://blog.sofunnyai.com/article/lets-encrypt.html">
  
    <link rel="alternate" href="/atom.xml" title="树先生的金融风控工程师博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 4.2.1"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="" target="_blank">
          <img class="img-circle img-rotate" src="/images/cartoon_header.jpeg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">树先生</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Risk Control Engineer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Beijing, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="/atom.xml" target="_blank" title="Rss" ><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎讨论金融风控业务和工程技巧</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPattern/">DesignPattern</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IO/">IO</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringCloud/">SpringCloud</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/interview/">interview</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ml/">ml</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/private/">private</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/risk/">risk</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/v2/">v2</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/xx/">xx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B9%B6%E5%8F%91/">并发</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DesignPattern/" rel="tag">DesignPattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/" rel="tag">SpringCloud</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aop/" rel="tag">aop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cck/" rel="tag">cck</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/" rel="tag">interview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jdk/" rel="tag">jdk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/note/" rel="tag">note</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/private/" rel="tag">private</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/risk/" rel="tag">risk</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/strategy/" rel="tag">strategy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag1/" rel="tag">tag1</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag2/" rel="tag">tag2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/v2/" rel="tag">v2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">中间件</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="tag">并发编程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" rel="tag">特征工程</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%84%E5%88%86%E5%8D%A1/" rel="tag">评分卡</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%B2%E6%9D%82/" rel="tag">闲杂</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/DesignPattern/" style="font-size: 13.2px;">DesignPattern</a> <a href="/tags/Spring/" style="font-size: 13.2px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 13px;">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size: 13.4px;">SpringCloud</a> <a href="/tags/aop/" style="font-size: 13px;">aop</a> <a href="/tags/cck/" style="font-size: 13px;">cck</a> <a href="/tags/hexo/" style="font-size: 13.4px;">hexo</a> <a href="/tags/interview/" style="font-size: 13px;">interview</a> <a href="/tags/java/" style="font-size: 14px;">java</a> <a href="/tags/jdk/" style="font-size: 13px;">jdk</a> <a href="/tags/mysql/" style="font-size: 13px;">mysql</a> <a href="/tags/note/" style="font-size: 13px;">note</a> <a href="/tags/private/" style="font-size: 13.4px;">private</a> <a href="/tags/risk/" style="font-size: 13.6px;">risk</a> <a href="/tags/spring/" style="font-size: 13.4px;">spring</a> <a href="/tags/strategy/" style="font-size: 13px;">strategy</a> <a href="/tags/tag1/" style="font-size: 13px;">tag1</a> <a href="/tags/tag2/" style="font-size: 13px;">tag2</a> <a href="/tags/v2/" style="font-size: 13px;">v2</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 13.2px;">中间件</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 13.2px;">基础</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 13.8px;">多线程</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 13.6px;">并发</a> <a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 13px;">并发编程</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 13px;">数据结构</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 13px;">机器学习</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 13px;">框架</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 13.2px;">源码</a> <a href="/tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" style="font-size: 13.2px;">特征工程</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 13.2px;">网络</a> <a href="/tags/%E8%AF%84%E5%88%86%E5%8D%A1/" style="font-size: 13.4px;">评分卡</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 13.2px;">运维</a> <a href="/tags/%E9%97%B2%E6%9D%82/" style="font-size: 13.2px;">闲杂</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">九月 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/1970/06/">六月 1970</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/risk/">risk</a>
              </p>
              <p class="item-title">
                <a href="/article/strategy.html" class="title">风控策略相关的一切</a>
              </p>
              <p class="item-date">
                <time datetime="2020-04-15T06:37:22.000Z" itemprop="datePublished">2020-04-15</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/SpringCloud/">SpringCloud</a>
              </p>
              <p class="item-title">
                <a href="/article/springcloud-H-03-hystrix.html" class="title">SpringCloud组件03---Hystrix实践</a>
              </p>
              <p class="item-date">
                <time datetime="2020-03-23T09:34:41.000Z" itemprop="datePublished">2020-03-23</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/SpringCloud/">SpringCloud</a>
              </p>
              <p class="item-title">
                <a href="/article/springcloud-H-02-open-feign.html" class="title">SpringCloud组件02---OpenFeign实践</a>
              </p>
              <p class="item-date">
                <time datetime="2020-03-22T04:22:51.000Z" itemprop="datePublished">2020-03-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/risk/">risk</a>
              </p>
              <p class="item-title">
                <a href="/article/vintage_rollrate_fpd.html" class="title">互联网金融资产质量评估指标---fpd、vintage、rollrate和迁移率等等</a>
              </p>
              <p class="item-date">
                <time datetime="2020-03-21T17:25:33.000Z" itemprop="datePublished">2020-03-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/SpringCloud/">SpringCloud</a>
              </p>
              <p class="item-title">
                <a href="/article/springcloud-H-01-eureka-ribbon.html" class="title">SpringCloud组件01---CAP、注册中心、Ribbon实践</a>
              </p>
              <p class="item-date">
                <time datetime="2020-03-02T14:30:40.000Z" itemprop="datePublished">2020-03-02</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-基于lets-encrypt的https证书" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      let&#39;s-encrypt配置网站免费SSL证书及自动更新
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/article/lets-encrypt.html" class="article-date">
	  <time datetime="2019-07-13T18:44:23.000Z" itemprop="datePublished">2019-07-14</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/network/">network</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link" href="/tags/hexo/" rel="tag">hexo</a>, <a class="article-tag-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a>, <a class="article-tag-link" href="/tags/%E8%BF%90%E7%BB%B4/" rel="tag">运维</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/article/lets-encrypt.html#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <!--此处生成目录-->
<div class="toc">
<!-- toc -->
<ul>
<li><a href="#qian-yan">前言</a></li>
<li><a href="#han-shang-xuan-ze">厂商选择</a></li>
<li><a href="#xia-zai-an-zhuang-cert-bot">下载安装cert-bot</a>
<ul>
<li><a href="#an-zhuang-cert-bot">安装cert-bot</a></li>
<li><a href="#huo-qu-zheng-shu">获取证书</a>
<ul>
<li><a href="#zhi-jie-an-zhuang-dao-nginx">直接安装到nginx</a></li>
<li><a href="#zhi-sheng-cheng-zheng-shu">只生成证书</a></li>
<li><a href="#ce-shi-zi-dong-geng-xin-zheng-shu">测试自动更新证书</a></li>
<li><a href="#chun-shou-dong-de-certonly">纯手动的certonly</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#can-kao-lian-jie">参考链接</a></li>
</ul>
<!-- tocstop -->
</div>
<h1><span id="qian-yan"> 前言</span><a href="#qian-yan" class="header-anchor">#</a></h1>
<p>相信看到这里的对SSL/TSL都有一定了解，链式信任、防劫持、防隐私泄露、安全可信，这些关键字大家脑海里都很熟悉。具体SSL细节就不啰嗦了，感兴趣可以去看看阮一峰的博客或者网上资料，本文主要是实操。</p>
<h1><span id="han-shang-xuan-ze"> 厂商选择</span><a href="#han-shang-xuan-ze" class="header-anchor">#</a></h1>
<p>除了域名统配的高端证书之外，一般我们的博客或者小型网站可以考虑使用免费厂商提供的证书。和大厂商的主要区别就是公信力了，不过理论上都是同等安全的。比如： <a href="https://letsencrypt.org/" target="_blank" rel="noopener">https://letsencrypt.org/</a> 在chrome等浏览器厂商的努力支持下，这些之前看起来小点的证书厂商现在兼容性也非常好了。</p>
<p>本文就以<code>let's encrypt</code>和nginx为例。</p>
<h1><span id="xia-zai-an-zhuang-cert-bot"> 下载安装cert-bot</span><a href="#xia-zai-an-zhuang-cert-bot" class="header-anchor">#</a></h1>
<p>废话少说，现在<code>let's encrypt</code>是推荐在server上使用<code>cert-bot</code>来安装、更新我们的证书，<a href="https://certbot.eff.org/" target="_blank" rel="noopener">https://certbot.eff.org/</a> 所以：</p>
<h2><span id="an-zhuang-cert-bot"> 安装cert-bot</span><a href="#an-zhuang-cert-bot" class="header-anchor">#</a></h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install certbot python2-certbot-nginx</span><br></pre></td></tr></table></figure>
<h2><span id="huo-qu-zheng-shu"> 获取证书</span><a href="#huo-qu-zheng-shu" class="header-anchor">#</a></h2>
<ul>
<li>
<p>首先把我们的域名解析到当前机器的nginx上，80可以正常访问。</p>
</li>
<li>
<p>然后获取证书有两种方式：1.直接自动安装到nginx，并由cert-bot管理nginx配置文件。   2.获取证书，但手动修改nginx配置文件</p>
</li>
</ul>
<h3><span id="zhi-jie-an-zhuang-dao-nginx"> 直接安装到nginx</span><a href="#zhi-jie-an-zhuang-dao-nginx" class="header-anchor">#</a></h3>
<ul>
<li>
<p>配置环境变量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> ln -s /main/server/nginx/sbin/nginx /usr/bin/nginx</span><br><span class="line">ln -s /main/server/nginx/conf/ /etc/nginx</span><br><span class="line">certbot --nginx</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>会自动识别nginx配置文件，生成nginx的证书，并修改nginx文件。这是最简单的方式。</p>
</li>
</ul>
<h3><span id="zhi-sheng-cheng-zheng-shu"> 只生成证书</span><a href="#zhi-sheng-cheng-zheng-shu" class="header-anchor">#</a></h3>
<ul>
<li>只生成证书：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly --nginx</span><br></pre></td></tr></table></figure>
<ul>
<li>会让你输入邮箱、域名等信息</li>
<li>然后去域名DNS插入一条TXT，之后会生成证书。</li>
</ul>
<h3><span id="ce-shi-zi-dong-geng-xin-zheng-shu"> 测试自动更新证书</span><a href="#ce-shi-zi-dong-geng-xin-zheng-shu" class="header-anchor">#</a></h3>
<ul>
<li>配置自动更新</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' &amp;&amp; certbot renew -q"</span> | sudo tee -a /etc/crontab &gt; /dev/null</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>测试一下：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot renew -q --dry-run</span><br></pre></td></tr></table></figure>
<p>如果报错一个ASCII错误问题，是因为nginx的配置文件有中文。。。所以还是建议只生成证书，手动去配置nginx比较好。</p>
</li>
<li>
<h3><span id="chun-shou-dong-de-certonly"> 纯手动的certonly</span><a href="#chun-shou-dong-de-certonly" class="header-anchor">#</a></h3>
</li>
<li>
<p>适用于上面的certonly报错的时候</p>
</li>
<li>
<pre class="highlight"><code class="bash"> certbot certonly --manual --email xxx@xxx.com -d *.domain.com 
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 自动更新DNS并更新通配符证书</span><br><span class="line"></span><br><span class="line">- 如果还是想自动，nginx配置文件的中文也解决了的话，&#96; certbot renew -q --dry-run&#96;测试如果还报错：</span><br><span class="line"></span><br><span class="line">  &#96;&#96;&#96;bash</span><br><span class="line">   certbot renew -q --dry-run</span><br><span class="line">  Attempting to renew cert (sofunnyai.com) from &#x2F;etc&#x2F;letsencrypt&#x2F;renewal&#x2F;sofunnyai.com.conf produced an unexpected error: The manual plugin is not working; there may be problems with your existing configuration.</span><br><span class="line">  The error was: PluginError(&#39;An authentication script must be provided with --manual-auth-hook when using the manual plugin non-interactively.&#39;,). Skipping.</span><br><span class="line">  All renewal attempts failed. The following certs could not be renewed:</span><br><span class="line">    &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;sofunnyai.com&#x2F;fullchain.pem (failure)</span><br></pre></td></tr></table></figure>

大意是说缺少一个`--manual-auth-hook`，因为我们比较狠使用的通配符证书`*.sofunnyai.com`,所以此处每次更新证书需要给DNS插入一条TXT的记录。我们需要脚本自动插入这个DNS记录，我们使用的`cloudflare`作为DNS厂商，所以这里需要一个插件`certbot-dns-cloudflare`。

</code></pre>
</li>
<li>
<p>先去<code>CloudFlare</code>后台申请一个局部的API令牌，只允许编辑DNS。</p>
<p><img src="https://gitee.com/radio/pics/raw/master/img/image-20200719214622846.png" alt="image-20200719214622846"></p>
</li>
<li>
<p>然后去github找到了这个<code>https://github.com/7sDream/certbot-dns-challenge-cloudflare-hooks</code> 一个DNS更新脚本。</p>
</li>
<li>
<p>下载配置dns的APIKEY</p>
</li>
<li>
<p>依赖jq    <code>yum install jq</code>  是一个json字符串处理的库，很小。</p>
</li>
<li>
<p>上面的脚本一共有三个文件，因为<code>CloudFlare</code>的官方API修改为标准<code>Authorization</code>授权，但是原作者还没改。需要修改三个文件里面的http认证头：</p>
<p><code>cat config.sh</code>文件的http认证头：</p>
<p>这个文件的主要功能是获取<code>zones</code></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CLOUDFLARE_KEY=&lt;这里修改为你的key&gt;</span><br><span class="line">CLOUDFLARE_EMAIL=&lt;这里修改为你的邮箱，新版已经不用了&gt;</span><br><span class="line"></span><br><span class="line">CHALLENGE_PREFIX=<span class="string">"_acme-challenge"</span></span><br><span class="line">CHALLENGE_DOMAIN=<span class="string">"<span class="variable">$&#123;CHALLENGE_PREFIX&#125;</span>.<span class="variable">$&#123;CERTBOT_DOMAIN&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">CLOUDFLARE_ZONE=$(curl -X GET <span class="string">"https://api.cloudflare.com/client/v4/zones?name=<span class="variable">$&#123;CERTBOT_DOMAIN&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"X-Auth-Email: <span class="variable">$&#123;CLOUDFLARE_EMAIL&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Authorization: Bearer <span class="variable">$&#123;CLOUDFLARE_KEY&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Content-Type: application/json"</span> -s | jq -r <span class="string">'.result[0].id'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"获取zone结果=<span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p><code>cloudflare-update-dns.sh</code>文件，这个文件的主要功能是添加dns记录。但是这里也需要修改里面的http认证头：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">DIR=<span class="string">"<span class="variable">$(dirname "$0")</span>"</span></span><br><span class="line"><span class="built_in">source</span> <span class="string">"<span class="variable">$DIR</span>/config.sh"</span></span><br><span class="line"></span><br><span class="line">DNS_SERVER=8.8.8.8</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"CHALLENGE_DOMAIN: <span class="variable">$&#123;CHALLENGE_DOMAIN&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"CHALLENGE_VALUE: <span class="variable">$&#123;CERTBOT_VALIDATION&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"DNS_SERVER: <span class="variable">$&#123;DNS_SERVER&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ZONE: <span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">ADD_RECORD_RESULT=$(curl -X POST <span class="string">"https://api.cloudflare.com/client/v4/zones/<span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>/dns_records"</span> \</span><br><span class="line">     -H <span class="string">"X-Auth-Email: <span class="variable">$&#123;CLOUDFLARE_EMAIL&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Authorization: Bearer <span class="variable">$&#123;CLOUDFLARE_KEY&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Content-Type: application/json"</span> \</span><br><span class="line">     --data <span class="string">"&#123;\"type\":\"TXT\",\"name\":\"<span class="variable">$&#123;CHALLENGE_DOMAIN&#125;</span>\",\"content\":\"<span class="variable">$&#123;CERTBOT_VALIDATION&#125;</span>\", \"ttl\": 120&#125;"</span> -s | jq -r <span class="string">"[.success, .errors[].message] | @csv"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"添加记录结果Add record result: <span class="variable">$&#123;ADD_RECORD_RESULT&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! $(<span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;ADD_RECORD_RESULT&#125;</span>"</span> | grep <span class="string">"true"</span>) ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"添加记录失败....Add record failed, exit"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    records=$(dig -t TXT <span class="variable">$&#123;CHALLENGE_DOMAIN&#125;</span> @<span class="variable">$&#123;DNS_SERVER&#125;</span> +noall +answer +short | grep <span class="string">"<span class="variable">$&#123;CERTBOT_VALIDATION&#125;</span>"</span>)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$&#123;records&#125;</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"等待DNS生效.....DNS records have not been propagate, sleep 10s..."</span></span><br><span class="line">    sleep 10</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"DNS已经生效，DNS record have been propagated, finish"</span></span><br></pre></td></tr></table></figure>
<p><code>cloudflare-clean-dns.sh</code>，这个文件是当证书处理完毕结束后清理掉记录，修改认证头：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">DIR=<span class="string">"<span class="variable">$(dirname "$0")</span>"</span></span><br><span class="line"><span class="built_in">source</span> <span class="string">"<span class="variable">$DIR</span>/config.sh"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"DOMAIN: <span class="variable">$&#123;CHALLENGE_DOMAIN&#125;</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ZONE: <span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">records=($(curl -X GET <span class="string">"https://api.cloudflare.com/client/v4/zones/<span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>/dns_records?type=TXT&amp;name=<span class="variable">$&#123;CHALLENGE_DOMAIN&#125;</span>&amp;page=1&amp;per_page=100"</span> \</span><br><span class="line">     -H <span class="string">"X-Auth-Email: <span class="variable">$&#123;CLOUDFLARE_EMAIL&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Authorization: Bearer <span class="variable">$&#123;CLOUDFLARE_KEY&#125;</span>"</span> \</span><br><span class="line">     -H <span class="string">"Content-Type: application/json"</span> -s | jq -r <span class="string">".result[].id"</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"即将删除这些DNS记录：<span class="variable">$&#123;records&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;records[@]&#125;</span>"</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"clean: <span class="variable">$record</span>"</span></span><br><span class="line">    curl -X DELETE <span class="string">"https://api.cloudflare.com/client/v4/zones/<span class="variable">$&#123;CLOUDFLARE_ZONE&#125;</span>/dns_records/<span class="variable">$&#123;record&#125;</span>"</span> \</span><br><span class="line">    	-H <span class="string">"X-Auth-Email: <span class="variable">$&#123;CLOUDFLARE_EMAIL&#125;</span>"</span> \</span><br><span class="line">        -H <span class="string">"Authorization: Bearer <span class="variable">$&#123;CLOUDFLARE_KEY&#125;</span>"</span> \</span><br><span class="line">    	-H <span class="string">"Content-Type: application/json"</span> -s | jq -r <span class="string">"[.success, .errors[].message] | @csv"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<ul>
<li>测试我们的脚本</li>
</ul>
<p><code>certbot renew --manual-auth-hook=&quot;/path/to/cloudflare-update-dns.sh&quot; --manual-cleanup-hook=&quot;/path/to/cloudflare-clean-dns.sh&quot; --post-hook=&quot;/path/to/nginx/sbin/nginx -s reload&quot; --dry-run</code></p>
<p>如果测试通过，就可以配置定时任务了</p>
<h1><span id="can-kao-lian-jie"> 参考链接</span><a href="#can-kao-lian-jie" class="header-anchor">#</a></h1>
<blockquote>
<p><a href="https://certbot.eff.org/lets-encrypt/centosrhel7-nginx" target="_blank" rel="noopener">https://certbot.eff.org/lets-encrypt/centosrhel7-nginx</a></p>
<p><a href="https://www.jianshu.com/p/6ea81a7b768f" target="_blank" rel="noopener">https://www.jianshu.com/p/6ea81a7b768f</a></p>
<p><a href="https://www.jianshu.com/p/a1cc68c7d916" target="_blank" rel="noopener">https://www.jianshu.com/p/a1cc68c7d916</a></p>
<p><a href="https://github.com/7sDream/certbot-dns-challenge-cloudflare-hooks" target="_blank" rel="noopener">https://github.com/7sDream/certbot-dns-challenge-cloudflare-hooks</a></p>
</blockquote>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://blog.sofunnyai.com/article/lets-encrypt.html" title="let&#39;s-encrypt配置网站免费SSL证书及自动更新" target="_blank" rel="external">https://blog.sofunnyai.com/article/lets-encrypt.html</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/cartoon_header.jpeg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">树先生</span><small class="ml-1x">Risk Control Engineer</small></a></h3>
        <div>一个金融风控软件工程师。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/article/bayes_optimization.html" title="基于贝叶斯优化的机器学习超参数优化（未完待续）"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/article/proxy.html" title="代理模式的一切"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="/atom.xml" target="_blank" title="Rss" ><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <!--div class="publishby">
        	Theme by <a href="#" target="_blank"> . </a>base on <a href="#">pure</a>.
        </div-->
       <div>
         <span id="busuanzi_container_site_pv">
            本站总访问量<span id="busuanzi_value_site_pv"></span>次
         </span>
       </div>
    </div>
</footer>

  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '37d6fe220531a0253492',
    clientSecret: 'b20bb830af693e7d62e5efe08048c9d42234ba2f',
    repo: 'liujianchina.github.io',
    owner: 'liujianchina',
    admin: ['liujianchina'],
    id: md5(location.pathname),
    distractionFreeMode: true
  })
  gitalk.render('comments')
  </script>

      







</body>
</html>